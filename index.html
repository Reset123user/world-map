<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Interactive World Map</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: url('mapbg.png') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      overflow: hidden;
      user-select: none;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    #viewport {
      width: 100%;
      height: 100%;
      overflow: hidden;
      position: relative;
      touch-action: none;
      cursor: grab;
    }

    #viewport:active {
      cursor: grabbing;
    }

    #map-container {
      position: absolute;
      top: 0;
      left: 0;
      transform-origin: 0 0;
      will-change: transform;
    }

    .foreground {
      width: 1920px;
      height: 1080px;
      background: url('worldmap.png') no-repeat center center;
      background-size: contain;
      position: relative;
      user-select: none;
    }

    .location-container {
      position: absolute;
      text-align: center;
      z-index: 10;
      pointer-events: auto;
      user-select: none;
    }

    .location-button {
      position: relative;
      width: 14px;
      height: 14px;
      background: lightgreen;
      border-radius: 50%;
      cursor: pointer;
      outline: none;
      border: 2px solid #66bb6a;
      box-shadow: 0 0 8px rgba(102, 187, 106, 0.6);
      transition: background 0.3s, transform 0.3s;
      /* For ripple effect, the animation is on a pseudo-element */
      z-index: 1;
    }

    /* Ripple effect */
    .location-button::before {
      content: "";
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 14px;
      height: 14px;
      border-radius: 50%;
      border: 2px solid #66bb6a;
      opacity: 0.6;
      animation: ripple 2.5s linear infinite;
      z-index: -1;
    }

    @keyframes ripple {
      0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.6;
      }
      100% {
        transform: translate(-50%, -50%) scale(2.6);
        opacity: 0;
      }
    }

    .location-button:hover {
      background: #80e27e;
      transform: scale(1.1);
    }

    .location-button:focus-visible {
      box-shadow: 0 0 12px 3px #80e27e;
      border-color: #80e27e;
    }

    .label {
      display: none;
      position: absolute;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
      white-space: nowrap;
      color: white;
      background: rgba(0, 0, 0, 0.7);
      padding: 4px 8px;
      font-size: 12px;
      border-radius: 4px;
      pointer-events: none;
      user-select: none;
      font-weight: 600;
      box-shadow: 0 0 8px rgba(0,0,0,0.7);
      z-index: 10;
    }

    .location-container:hover .label,
    .location-button:focus-visible + .label {
      display: block;
    }

    /* Media Queries for Mobile Responsiveness */
    @media (max-width: 768px) {
      .location-button {
        width: 12px;
        height: 12px;
      }
      .location-button::before {
        width: 12px;
        height: 12px;
      }
      .label {
        font-size: 10px;
      }
    }
  </style>
</head>
<body>
  <div id="viewport" role="region" aria-label="Interactive World Map">
    <div id="map-container">
      <div class="foreground">
        <div class="location-container" style="top: 450px; left: 350px;">
          <div class="location-button" role="button" aria-label="USA" tabindex="0"></div>
          <div class="label" aria-hidden="true">USA</div>
        </div>
        <div class="location-container" style="top: 490px; left: 1270px;">
          <div class="location-button" role="button" aria-label="India" tabindex="0"></div>
          <div class="label" aria-hidden="true">INDIA</div>
        </div>
        <div class="location-container" style="top: 400px; left: 1580px;">
          <div class="location-button" role="button" aria-label="Japan" tabindex="0"></div>
          <div class="label" aria-hidden="true">Japan</div>
        </div>
        <div class="location-container" style="top: 750px; left: 1550px;">
          <div class="location-button" role="button" aria-label="Australia" tabindex="0"></div>
          <div class="label" aria-hidden="true">Australia</div>
        </div>
        <div class="location-container" style="top: 600px; left: 1250px;">
          <div class="location-button" role="button" aria-label="Maldives" tabindex="0"></div>
          <div class="label" aria-hidden="true">Maldives</div>
        </div>
        <div class="location-container" style="top: 480px; left: 1120px;">
          <div class="location-button" role="button" aria-label="Kuwait" tabindex="0"></div>
          <div class="label" aria-hidden="true">Kuwait</div>
        </div>
        <div class="location-container" style="top: 500px; left: 1140px;">
          <div class="location-button" role="button" aria-label="Qatar" tabindex="0"></div>
          <div class="label" aria-hidden="true">Qatar</div>
        </div>
        <div class="location-container" style="top: 350px; left: 380px;">
          <div class="location-button" role="button" aria-label="Canada" tabindex="0"></div>
          <div class="label" aria-hidden="true">Canada</div>
        </div>
        <div class="location-container" style="top: 480px; left: 1300px;">
          <div class="location-button" role="button" aria-label="Nepal" tabindex="0"></div>
          <div class="label" aria-hidden="true">Nepal</div>
        </div>
        <div class="location-container" style="top: 600px; left: 1390px;">
          <div class="location-button" role="button" aria-label="Singapore" tabindex="0"></div>
          <div class="label" aria-hidden="true">Singapore</div>
        </div>
        <div class="location-container" style="top: 450px; left: 1520px;">
          <div class="location-button" role="button" aria-label="Korea" tabindex="0"></div>
          <div class="label" aria-hidden="true">Korea</div>
        </div>
        <div class="location-container" style="top: 500px; left: 1170px;">
          <div class="location-button" role="button" aria-label="UAE" tabindex="0"></div>
          <div class="label" aria-hidden="true">UAE</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const viewport = document.getElementById("viewport");
    const mapContainer = document.getElementById("map-container");

    let scale = 1.5;
    let targetScale = scale;
    let offsetX = 0, offsetY = 0;
    let targetOffsetX = 0, targetOffsetY = 0;

    const mapWidth = 1920;
    const mapHeight = 1080;

    let cursorX = window.innerWidth * 0.5;
    let cursorY = window.innerHeight * 0.5;

    function clamp(val, min, max) {
      return Math.min(Math.max(val, min), max);
    }

    function animateTransform() {
      scale += (targetScale - scale) * 0.08;
      offsetX += (targetOffsetX - offsetX) * 0.08;
      offsetY += (targetOffsetY - offsetY) * 0.08;
      mapContainer.style.transform = `translate(${offsetX}px, ${offsetY}px) scale(${scale})`;
      requestAnimationFrame(animateTransform);
    }

    function updateTargetOffsetsFromCursor() {
      const scaledWidth = mapWidth * targetScale;
      const scaledHeight = mapHeight * targetScale;
      const maxOffsetX = scaledWidth - window.innerWidth;
      const maxOffsetY = scaledHeight - window.innerHeight;
      const ratioX = cursorX / window.innerWidth;
      const ratioY = cursorY / window.innerHeight;
      targetOffsetX = clamp(-maxOffsetX * ratioX, -maxOffsetX, 0);
      targetOffsetY = clamp(-maxOffsetY * ratioY, -maxOffsetY, 0);
    }

    let isTouching = false;

    viewport.addEventListener("mousemove", (e) => {
      if (!isTouching) {
        cursorX = e.clientX;
        cursorY = e.clientY;
        updateTargetOffsetsFromCursor();
      }
    });

    viewport.addEventListener("wheel", (e) => {
      e.preventDefault();
      const delta = e.deltaY > 0 ? -0.01 : 0.01;
      targetScale = clamp(targetScale + delta, 1, 2.5);
      updateTargetOffsetsFromCursor();
    }, { passive: false });

    let lastTouchDistance = null;
    let lastTouchCenter = null;

    function getDistance(touches) {
      const dx = touches[0].clientX - touches[1].clientX;
      const dy = touches[0].clientY - touches[1].clientY;
      return Math.sqrt(dx * dx + dy * dy);
    }

    function getCenter(touches) {
      return {
        x: (touches[0].clientX + touches[1].clientX) / 2,
        y: (touches[0].clientY + touches[1].clientY) / 2
      };
    }

    viewport.addEventListener("touchstart", (e) => {
      isTouching = true;
      if (e.touches.length === 2) {
        lastTouchDistance = getDistance(e.touches);
        lastTouchCenter = getCenter(e.touches);
      }
    });

    viewport.addEventListener("touchmove", (e) => {
      if (e.touches.length === 1) {
        cursorX = e.touches[0].clientX;
        cursorY = e.touches[0].clientY;
        updateTargetOffsetsFromCursor();
      } else if (e.touches.length === 2) {
        const newDistance = getDistance(e.touches);
        const center = getCenter(e.touches);
        const distanceChange = newDistance - lastTouchDistance;
        targetScale = clamp(targetScale + distanceChange * 0.0005, 1, 2.5);
        cursorX = center.x;
        cursorY = center.y;
        updateTargetOffsetsFromCursor();
        lastTouchDistance = newDistance;
        lastTouchCenter = center;
      }
    }, { passive: false });

    viewport.addEventListener("touchend", () => {
      isTouching = false;
    });

    updateTargetOffsetsFromCursor();
    animateTransform();
  </script>
</body>
</html>

